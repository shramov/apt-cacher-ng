<!DOCTYPE html>
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=8" />
      <meta name="MSSmartTagsPreventParsing" content="true" />
      <title>Apt-Cacher NG maintenance: ${taskTitle}</title>
      <link rel="stylesheet" type="text/css" href="/style.css" />

      
       <script type="text/javascript">
function checkOrUncheck(checkIt)
{
   var formular=document.getElementById('mainForm');
   for(var i=0; i<formular.length; ++i)
   {
      if(formular[i].type == 'checkbox') 
         formular[i].checked = checkIt;
   }
}

function show_rest() {
   var nodes=document.getElementsByName('shorttable');
   for(var i=0; i<nodes.length; ++i)
      nodes[i].className = "xhidden";
   nodes = document.getElementsByName('bigtable');
   for(var i=0; i<nodes.length; ++i)
      nodes[i].className = "xshow";
}

function copycheck(src, clname)
{
   var nodes=document.getElementsByClassName(clname);
   var isChecked = src.checked;
   for(var i=0; i<nodes.length; ++i)
      nodes[i].checked = isChecked;
}

	       function doCancel()
	       {
		      // get rid of all parameters
		      var baseLink = window.location.href.split('?')[0];
		      var canLink = baseLink + "?sigAbort=1";
		      window.location.href = canLink;
	      }

	       function doForce()
	       {
		      window.location.href = window.location.href.replace( /\?|$/, "?force=1&" );
//			window.location.reload(true);
	      }

      </script>

      <!--script type="text/javascript">

         var rr=0;

         function pageScroll() {
            window.scrollBy(0,50);

            rr=(rr+1)%20;
            if(0==rr)
               appendData();

    	scrolldelay = setTimeout('pageScroll()',200); // scrolls every 200 milliseconds
}

function stopScroll() {
    	clearTimeout(scrolldelay);
}

function  appendData()
{
   document.getElementById('logArea').innerHTML += "<b>moo</b><br>";
}
//   window.onload=pageScroll;

      </script-->
   </head>
   <body>
	   <form id="mainForm">
		   <table class="maxwid center noborders" cellspacing=0 cellpadding=0>
			   <tr>
				   <td class="thetitle"><h1>Apt-Cacher NG maintenance tasks on ${hostname}</h1></td>
			   </tr>
			   <tr>
				   <td>
					   <div style="text-align:left;font-size:small;">
						   <div class="visarea maxwid" style="text-align:left" id="logArea">
							   Currently running <b>${taskTitle}</b>, started at ${startTime}<div style="display:${:/showCancel/inline/none};white-space:nowrap;" id="cancelLink"> (<a href="javascript:doCancel()">CANCEL THIS</a>)</div><br>
							   ${action}
                 <input type="hidden" name="kbid" value="${cachekey}">
						   </div>
					   </div>
				   </td>
			   </tr>
			   <tr class="visarea maxwid" style="display:${:/purgeActionVisible/block/none}">
				   <td style="width:100%">
					   <div class="visarea maxwid" style="white-space:nowrap;height:100%;width:100%">${purgeactionmeta}
						   <b>Action(s):</b><br>
						   <input type="submit" name="doDelete" value="Delete selected files" class="btnmargin">
						   <input type="submit" name="doTruncate" value="Truncate selected files to zero size" class="btnmargin">
						   <button type="button" onclick="checkOrUncheck(true);" class="btnmargin">Check all</button>
						   <button type="button" onclick="checkOrUncheck(false);" class="btnmargin">Uncheck all</button>
					   </div>
				   </td>
			   </tr>
			   <tr><td><div class="visarea maxwid">${footer}</div></td></tr>
		   </table>
	   </form>
   </body>
<!--script type="text/javascript">
   document.getElementById('cancelLink').style = "display:none";
</script-->
</html>

